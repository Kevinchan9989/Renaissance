<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.0">
  <bpmn:collaboration id="Collaboration_1">
    <bpmn:participant id="Participant_Announcement" name="Announcement (Create)" processRef="Process_Announcement" />
  </bpmn:collaboration>
  <bpmn:process id="Process_Announcement" isExecutable="false">
    <bpmn:laneSet id="LaneSet_1">
      <bpmn:lane id="Lane_System" name="System">
        <bpmn:flowNodeRef>StartEvent_1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_ValidationPassed</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_PublicationTime</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EndEvent_1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_EmailUpdate</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_AwaitSemast</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_EmailFailed</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_ValidateSecurity</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_EmailSuccess</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Publish</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_EmailOutcome</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Overwrite</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_Maker" name="Maker">
        <bpmn:flowNodeRef>Task_UpdateAnnouncement</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_Actor</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_WithdrawApproval</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_SelectAction</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_Action</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_Checker" name="Checker">
        <bpmn:flowNodeRef>Task_ApproveAnnouncement</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_Approved</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    
    <bpmn:startEvent id="StartEvent_1" name="Start">
      <bpmn:outgoing>Flow_1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Task_EmailUpdate" name="Email users to update announcements">
      <bpmn:incoming>Flow_1</bpmn:incoming>
      <bpmn:outgoing>Flow_2</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_1" sourceRef="StartEvent_1" targetRef="Task_EmailUpdate" />
    <bpmn:sequenceFlow id="Flow_2" sourceRef="Task_EmailUpdate" targetRef="Task_UpdateAnnouncement" />

    <bpmn:userTask id="Task_UpdateAnnouncement" name="Update Announcement">
      <bpmn:incoming>Flow_WithdrawLoop</bpmn:incoming>
      <bpmn:incoming>Flow_No_Approved</bpmn:incoming>
      <bpmn:incoming>Flow_2</bpmn:incoming>
      <bpmn:incoming>Flow_Action_Update</bpmn:incoming> <bpmn:outgoing>Flow_To_ActorGateway</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_Actor" name="Actor?">
      <bpmn:incoming>Flow_To_ActorGateway</bpmn:incoming>
      <bpmn:outgoing>Flow_To_Withdraw</bpmn:outgoing>
      <bpmn:outgoing>Flow_To_Checker</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Task_WithdrawApproval" name="Withdraw Approval">
      <bpmn:incoming>Flow_To_Withdraw</bpmn:incoming>
      <bpmn:outgoing>Flow_WithdrawLoop</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Task_ApproveAnnouncement" name="Approve Announcement">
      <bpmn:incoming>Flow_To_Checker</bpmn:incoming>
      <bpmn:outgoing>Flow_To_ApprovedGateway</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_Approved" name="Approved?">
      <bpmn:incoming>Flow_To_ApprovedGateway</bpmn:incoming>
      <bpmn:outgoing>Flow_No_Approved</bpmn:outgoing>
      <bpmn:outgoing>Flow_Yes_Approved</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    
    <bpmn:sequenceFlow id="Flow_WithdrawLoop" sourceRef="Task_WithdrawApproval" targetRef="Task_UpdateAnnouncement" />
    <bpmn:sequenceFlow id="Flow_To_ActorGateway" sourceRef="Task_UpdateAnnouncement" targetRef="Gateway_Actor" />
    <bpmn:sequenceFlow id="Flow_To_Withdraw" name="Maker" sourceRef="Gateway_Actor" targetRef="Task_WithdrawApproval" />
    <bpmn:sequenceFlow id="Flow_To_Checker" name="Checker" sourceRef="Gateway_Actor" targetRef="Task_ApproveAnnouncement" />
    <bpmn:sequenceFlow id="Flow_To_ApprovedGateway" sourceRef="Task_ApproveAnnouncement" targetRef="Gateway_Approved" />
    <bpmn:sequenceFlow id="Flow_No_Approved" name="No" sourceRef="Gateway_Approved" targetRef="Task_UpdateAnnouncement" />

    <bpmn:task id="Task_AwaitSemast" name="Await MEPS+ Files">
      <bpmn:incoming>Flow_Yes_Approved</bpmn:incoming>
      <bpmn:incoming>Flow_Action_Amend</bpmn:incoming> <bpmn:outgoing>Flow_To_Validate</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Task_ValidateSecurity" name="Validate MEPS+ Data">
      <bpmn:incoming>Flow_To_Validate</bpmn:incoming>
      <bpmn:incoming>Flow_From_Overwrite</bpmn:incoming> <bpmn:outgoing>Flow_To_ValidationGateway</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="Gateway_ValidationPassed" name="Validation passed?">
      <bpmn:incoming>Flow_To_ValidationGateway</bpmn:incoming>
      <bpmn:outgoing>Flow_ValidationNo</bpmn:outgoing>
      <bpmn:outgoing>Flow_ValidationYes</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="Task_EmailFailed" name="Email users on failed validation">
      <bpmn:incoming>Flow_ValidationNo</bpmn:incoming>
      <bpmn:outgoing>Flow_To_SelectAction</bpmn:outgoing>
    </bpmn:task>
    
    <bpmn:userTask id="Task_SelectAction" name="Select Rectification Action">
      <bpmn:incoming>Flow_To_SelectAction</bpmn:incoming>
      <bpmn:outgoing>Flow_To_ActionGateway</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_Action" name="Action?">
      <bpmn:incoming>Flow_To_ActionGateway</bpmn:incoming>
      <bpmn:outgoing>Flow_Action_Amend</bpmn:outgoing>
      <bpmn:outgoing>Flow_Action_Overwrite</bpmn:outgoing>
      <bpmn:outgoing>Flow_Action_Update</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="Task_Overwrite" name="Overwrite OMEGA Data">
      <bpmn:incoming>Flow_Action_Overwrite</bpmn:incoming>
      <bpmn:outgoing>Flow_From_Overwrite</bpmn:outgoing>
    </bpmn:task>

    <bpmn:sequenceFlow id="Flow_Yes_Approved" name="Yes" sourceRef="Gateway_Approved" targetRef="Task_AwaitSemast" />
    <bpmn:sequenceFlow id="Flow_To_Validate" sourceRef="Task_AwaitSemast" targetRef="Task_ValidateSecurity" />
    <bpmn:sequenceFlow id="Flow_To_ValidationGateway" sourceRef="Task_ValidateSecurity" targetRef="Gateway_ValidationPassed" />
    <bpmn:sequenceFlow id="Flow_ValidationNo" name="No" sourceRef="Gateway_ValidationPassed" targetRef="Task_EmailFailed" />
    <bpmn:sequenceFlow id="Flow_To_SelectAction" sourceRef="Task_EmailFailed" targetRef="Task_SelectAction" />
    <bpmn:sequenceFlow id="Flow_To_ActionGateway" sourceRef="Task_SelectAction" targetRef="Gateway_Action" />
    
    <bpmn:sequenceFlow id="Flow_Action_Amend" name="Amend MEPS+" sourceRef="Gateway_Action" targetRef="Task_AwaitSemast" />
    <bpmn:sequenceFlow id="Flow_Action_Overwrite" name="Overwrite" sourceRef="Gateway_Action" targetRef="Task_Overwrite" />
    <bpmn:sequenceFlow id="Flow_From_Overwrite" sourceRef="Task_Overwrite" targetRef="Task_ValidateSecurity" />
    <bpmn:sequenceFlow id="Flow_Action_Update" name="Update OMEGA" sourceRef="Gateway_Action" targetRef="Task_UpdateAnnouncement" />

    <bpmn:task id="Task_EmailSuccess" name="Email users on successful validation">
      <bpmn:incoming>Flow_ValidationYes</bpmn:incoming>
      <bpmn:outgoing>Flow_To_Timer</bpmn:outgoing>
    </bpmn:task>
    <bpmn:intermediateCatchEvent id="Event_PublicationTime" name="At Publication Time">
      <bpmn:incoming>Flow_To_Timer</bpmn:incoming>
      <bpmn:outgoing>Flow_To_Publish</bpmn:outgoing>
      <bpmn:timerEventDefinition />
    </bpmn:intermediateCatchEvent>
    <bpmn:task id="Task_Publish" name="Publish Announcement">
      <bpmn:incoming>Flow_To_Publish</bpmn:incoming>
      <bpmn:outgoing>Flow_To_EmailOutcome</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Task_EmailOutcome" name="Email users on publication outcome">
      <bpmn:incoming>Flow_To_EmailOutcome</bpmn:incoming>
      <bpmn:outgoing>Flow_End</bpmn:outgoing>
    </bpmn:task>
    <bpmn:endEvent id="EndEvent_1" name="End">
      <bpmn:incoming>Flow_End</bpmn:incoming>
    </bpmn:endEvent>
    
    <bpmn:sequenceFlow id="Flow_ValidationYes" name="Yes" sourceRef="Gateway_ValidationPassed" targetRef="Task_EmailSuccess" />
    <bpmn:sequenceFlow id="Flow_To_Timer" sourceRef="Task_EmailSuccess" targetRef="Event_PublicationTime" />
    <bpmn:sequenceFlow id="Flow_To_Publish" sourceRef="Event_PublicationTime" targetRef="Task_Publish" />
    <bpmn:sequenceFlow id="Flow_To_EmailOutcome" sourceRef="Task_Publish" targetRef="Task_EmailOutcome" />
    <bpmn:sequenceFlow id="Flow_End" sourceRef="Task_EmailOutcome" targetRef="EndEvent_1" />

  </bpmn:process>
  
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1">
      <bpmndi:BPMNShape id="Participant_Announcement_di" bpmnElement="Participant_Announcement" isHorizontal="true">
        <dc:Bounds x="120" y="80" width="2200" height="760" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_System_di" bpmnElement="Lane_System" isHorizontal="true">
        <dc:Bounds x="150" y="80" width="2170" height="300" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_Maker_di" bpmnElement="Lane_Maker" isHorizontal="true">
        <dc:Bounds x="150" y="380" width="2170" height="215" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_Checker_di" bpmnElement="Lane_Checker" isHorizontal="true">
        <dc:Bounds x="150" y="595" width="2170" height="245" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="200" y="162" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_EmailUpdate_di" bpmnElement="Task_EmailUpdate">
        <dc:Bounds x="280" y="140" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_AwaitSemast_di" bpmnElement="Task_AwaitSemast">
        <dc:Bounds x="900" y="270" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ValidateSecurity_di" bpmnElement="Task_ValidateSecurity">
        <dc:Bounds x="1050" y="270" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_ValidationPassed_di" bpmnElement="Gateway_ValidationPassed" isMarkerVisible="true">
        <dc:Bounds x="1200" y="285" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1202" y="342" width="47" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_EmailFailed_di" bpmnElement="Task_EmailFailed">
        <dc:Bounds x="1200" y="100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Overwrite_di" bpmnElement="Task_Overwrite">
        <dc:Bounds x="1500" y="100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_EmailSuccess_di" bpmnElement="Task_EmailSuccess">
        <dc:Bounds x="1400" y="270" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_PublicationTime_di" bpmnElement="Event_PublicationTime">
        <dc:Bounds x="1650" y="292" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Publish_di" bpmnElement="Task_Publish">
        <dc:Bounds x="1750" y="270" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_EmailOutcome_di" bpmnElement="Task_EmailOutcome">
        <dc:Bounds x="1900" y="270" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1_di" bpmnElement="EndEvent_1">
        <dc:Bounds x="2050" y="292" width="36" height="36" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Task_UpdateAnnouncement_di" bpmnElement="Task_UpdateAnnouncement">
        <dc:Bounds x="280" y="462" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Actor_di" bpmnElement="Gateway_Actor" isMarkerVisible="true">
        <dc:Bounds x="450" y="477" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_WithdrawApproval_di" bpmnElement="Task_WithdrawApproval">
        <dc:Bounds x="550" y="462" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_SelectAction_di" bpmnElement="Task_SelectAction">
        <dc:Bounds x="1200" y="440" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Action_di" bpmnElement="Gateway_Action" isMarkerVisible="true">
        <dc:Bounds x="1350" y="455" width="50" height="50" />
        <bpmndi:BPMNLabel>
            <dc:Bounds x="1356" y="515" width="38" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Task_ApproveAnnouncement_di" bpmnElement="Task_ApproveAnnouncement">
        <dc:Bounds x="550" y="652" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Approved_di" bpmnElement="Gateway_Approved" isMarkerVisible="true">
        <dc:Bounds x="750" y="667" width="50" height="50" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNEdge id="Flow_1_di" bpmnElement="Flow_1">
        <di:waypoint x="236" y="180" />
        <di:waypoint x="280" y="180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_2_di" bpmnElement="Flow_2">
        <di:waypoint x="330" y="220" />
        <di:waypoint x="330" y="462" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_ValidationNo_di" bpmnElement="Flow_ValidationNo">
        <di:waypoint x="1225" y="285" />
        <di:waypoint x="1225" y="180" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_SelectAction_di" bpmnElement="Flow_To_SelectAction">
        <di:waypoint x="1250" y="180" />
        <di:waypoint x="1250" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_ActionGateway_di" bpmnElement="Flow_To_ActionGateway">
        <di:waypoint x="1300" y="480" />
        <di:waypoint x="1350" y="480" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_Action_Amend_di" bpmnElement="Flow_Action_Amend">
        <di:waypoint x="1375" y="455" />
        <di:waypoint x="1375" y="90" />
        <di:waypoint x="950" y="90" />
        <di:waypoint x="950" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Action_Overwrite_di" bpmnElement="Flow_Action_Overwrite">
        <di:waypoint x="1375" y="455" />
        <di:waypoint x="1375" y="140" />
        <di:waypoint x="1500" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_From_Overwrite_di" bpmnElement="Flow_From_Overwrite">
        <di:waypoint x="1550" y="180" />
        <di:waypoint x="1550" y="240" />
        <di:waypoint x="1100" y="240" />
        <di:waypoint x="1100" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Action_Update_di" bpmnElement="Flow_Action_Update">
        <di:waypoint x="1375" y="505" />
        <di:waypoint x="1375" y="560" />
        <di:waypoint x="330" y="560" />
        <di:waypoint x="330" y="542" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_Yes_Approved_di" bpmnElement="Flow_Yes_Approved">
        <di:waypoint x="775" y="667" />
        <di:waypoint x="775" y="310" />
        <di:waypoint x="900" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_Validate_di" bpmnElement="Flow_To_Validate">
        <di:waypoint x="1000" y="310" />
        <di:waypoint x="1050" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_ValidationGateway_di" bpmnElement="Flow_To_ValidationGateway">
        <di:waypoint x="1150" y="310" />
        <di:waypoint x="1200" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ValidationYes_di" bpmnElement="Flow_ValidationYes">
        <di:waypoint x="1250" y="310" />
        <di:waypoint x="1400" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_Timer_di" bpmnElement="Flow_To_Timer">
        <di:waypoint x="1500" y="310" />
        <di:waypoint x="1650" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_Publish_di" bpmnElement="Flow_To_Publish">
        <di:waypoint x="1686" y="310" />
        <di:waypoint x="1750" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_EmailOutcome_di" bpmnElement="Flow_To_EmailOutcome">
        <di:waypoint x="1850" y="310" />
        <di:waypoint x="1900" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_End_di" bpmnElement="Flow_End">
        <di:waypoint x="2000" y="310" />
        <di:waypoint x="2050" y="310" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_WithdrawLoop_di" bpmnElement="Flow_WithdrawLoop">
        <di:waypoint x="600" y="462" />
        <di:waypoint x="600" y="410" />
        <di:waypoint x="350" y="410" />
        <di:waypoint x="350" y="462" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_ActorGateway_di" bpmnElement="Flow_To_ActorGateway">
        <di:waypoint x="380" y="502" />
        <di:waypoint x="450" y="502" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_Withdraw_di" bpmnElement="Flow_To_Withdraw">
        <di:waypoint x="500" y="502" />
        <di:waypoint x="550" y="502" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_Checker_di" bpmnElement="Flow_To_Checker">
        <di:waypoint x="475" y="527" />
        <di:waypoint x="475" y="692" />
        <di:waypoint x="550" y="692" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_To_ApprovedGateway_di" bpmnElement="Flow_To_ApprovedGateway">
        <di:waypoint x="650" y="692" />
        <di:waypoint x="750" y="692" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_No_Approved_di" bpmnElement="Flow_No_Approved">
        <di:waypoint x="775" y="717" />
        <di:waypoint x="775" y="760" />
        <di:waypoint x="330" y="760" />
        <di:waypoint x="330" y="542" />
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>