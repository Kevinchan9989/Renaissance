<!DOCTYPE html>
<html>
<head>
<title>Authenticating...</title>
<script>
// Capture token immediately
const hash = window.location.hash.substring(1);
if (hash) {
  const params = new URLSearchParams(hash);
  const token = params.get('access_token');
  if (token) {
    localStorage.setItem('gdrive_access_token', token);
    if (window.opener) {
      try {
        window.opener.postMessage({type:'google_drive_auth_success',accessToken:token}, '*');
      } catch(e) {}
    }
    document.write('<h1>âœ“ Success!</h1><p>Closing...</p>');
    setTimeout(() => window.close(), 500);
  }
} else {
  document.write('<h1>Waiting...</h1>');
}
</script>
</head>
<body style="font-family:sans-serif;text-align:center;padding:50px">
<h1>Processing...</h1>
</body>
</html>
